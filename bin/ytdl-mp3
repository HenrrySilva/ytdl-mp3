#!/usr/bin/env node

const path = require('path');
const os = require('os');

const { Command } = require('commander');
const { name, description, version } = require('../package.json');

const main = require('../build/main');

const program = new Command();
program.name(name);
program.description(description);
program.version(version);
program.allowExcessArguments(false);
program.argument('<url>', 'url of video to download');
program.option('-t --title', 'title of song');
program.option('-a --artist', 'artist of song');
program.option('-o --output-dir', 'path to output directory', path.join(os.homedir(), 'Downloads'));
program.parse();

// Until latest version works
process.env['YTDL_NO_UPDATE'] = '1';

main.default(program.args[0], program.opts());